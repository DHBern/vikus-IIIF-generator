version: '3.4'

services:
  vikusdocker:
    # image: vikusdocker
    build: ./services/vikusdocker
    ports:
      - 5000:5000
    # command: gunicorn --bind 5000 --workers 1 --threads 8 --timeout 0 main:app
    volumes:
      - ./data:/data
      - ./scripts:/scripts

  redis:
    image: "redis:alpine"

  webserver:
    #image: nginx
    build: ./services/nginx
    ports:
      - 8000:80
    volumes:
      - ./data:/usr/share/nginx/html/data
      - ./services/nginx/nginx.conf:/etc/nginx/conf.d/default.conf
    #  - ./vikus-docker-frontend:/usr/share/nginx/html/frontend
